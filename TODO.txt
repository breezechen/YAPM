TODO LIST

Refactoring bugs
- 64TODO
- bug overflow under x64 (how to reproduce : select all processes and view threads)
- YAPM should run without the driver on x64 (for now) and user should be able to disable it (command line & option)

Refactoring OK : 
- Privileges (all)
- Threads (all)
- Modules (all)
- Processes (all)
- Windows (all)
- Tasks (all)
- General (all)
- MemRegion (all)
- Env var (all)
- Network (all)

- Search
- Log
- Handle


BUGS CRITIQUES
- copy to cb : trier par ordre alphabétique
- FAQ : histoire du securepassword
- relocated dlls + others highlightings (isTask, wow64...)
- dans le bug report -> mettre le nombre de bits
- extend dico et ajout de TryAdd ?
- refermer les handles quand les processes meurent !
- &ventuellement ajouter 'kill by method' option (et mettre virer terminateprocess, kick de tous les threads (très efficace !!), virer tous les handles, kill avec remoteThread, try to crash (WriteMem foireux)...)
- bouton 'centrer form' dans choix pos&size
- exclusive use of core (dispo que quand multi proco) => enleve pour tous les process l'affinité sur les cores sélectionnés (puis form avec liste des process pour lesquels çà a echoué), pas de messages d'erreur
- begin debugged marche pas
- problème icones menu principal cachées (Vista seulement)
- reports à faire (vérifier l'utilisation de GetAvailbleProperties)
	process -> save services
	mod -> foireux
	thread -> foireux
	handles -> OK
	windows -> OK
	monitor -> rien
	services -> OK
	network -> à implémenter (menu + icone ribbon)
	search -> OK
	main -> à faire

BUGS NON CRITIQUES
- lancer ngen de YAPM lors du premier lancement... (WaitForSingle du process ngen)
- ajouter nouvelles infos pour les handles (cf struct récupérée)
- timers dans les options -> mettre des numeric updown
- is remote debugger present marche pas (cf _WIN32_WINNT)
- merger toutes les dll dans un seul executable
- increment sur le IntPtr
- says thx to p/inv declarations from wj32
- say thanks to developerfusion.com && pinvoke.net
- l'organisation des colonnes des threads n'est pas rechargée (ou bien sauvée ?) dans la form détail. Voir si c'est pareil pour les autres lv de la form
- highlightings en remote
- shift + right click -> menu windows
- OK dans chooseColumns -> devrait sauvegarder les préférences de suite
- recup username foireux
- pending task pour remote (le _deg n'est pas appelé en remote)
- goto item dans le log
- résolutions d'adresses -> stocker correspondance IP:port <-> nom resolu dans un dico ?
- utilisation de TryGetValue pour accéder aux dicos
- ajout des 6 nouvelles infos process dans formDetail (sauf certaines qui auront un truc spécifique comme token, job)
- bien différencier local et remote, ex. hidden processes (afficher dans le caption des forms ?)
- gestion startup items ou pas ? (+ coloration pour les process/services qui démarrent au boot)
- ajouter description des colonnes (dans le chooseColumns)
- si local connection -> spawn tâche en waitForSingleObject qui attend la fin d'un process pour le exitcode dans formDetail.
- option Kill with specific exitcode
- find window -> select thread possible
- creatime time foireux pour les threads
- virer la form qui gère le drag & drop pour la sélection d'un process
- checker replace taskmgr sous 7 (need de la RAM !!)
- menu select all dans tous les lv
- notifications processus & services deleted
- inspect structures (PEB...) + possibilité afficher valeurs structs depuis hex editor
- optmisation NetWorklist -> bytes swap uniquement pour les news items (inutile de faire çà a chaque fois dans l'enum)
- Click sur 'monitor counters' -> BeginUpdate/EndUpdate du TV et du LV de frmMain
- monitoring de pleins des items -> thread spécifique nécessaire pour éviter les bloquages
- systemInfo pour les pc remote
- optimiser récupération handles / memory region
- reprendre tout le code unmanaged (cProcessRW foiré, Marshal.Copy useless (utiliser GCHandle.Alloc...))
- colorations listviewitems pour les modules (cf. flags)
- SystemInfos -> afficher graphes en permanence (et pas que quand la form est affichée)
- optimisation récupération zones mémoire
- lvFileStrings doit être Virtual
- dependencies pour les services KO (on a le path avec \SystemRoot\ dans le .Imagepath (récupérer plutôt .Getinformation(path) + enlever ligne de commande après fichier)
- si network connexions obtenues AVANT process, alors le processname n'est pas trouvé (refaire un check après)
- résoudre pb des nouvelles infos process pour le réseau (idem que Affinity)
- priorité des highlightings à prendre en compte
- ajouter bouton Default dans ChooseColumns
- ajouter infos token (elevation, domain, user name, SID...)
- choix font
- désactiver msgbox pour le server
- en mode server, tous les captions sont en gris (lvProcess)
- ajouter "démarrer en tant que" (runas, cf lien opera)
- option display icons in listviews
- perf counter pour PC distant (+ ajouter gestion remote pour la recherche)
- path des process : \Device\VBoxMiniRdr\VBOXSVR\Release\YAPM.exe à convertir en path avec lecteur
- auto check update option (+ ajouter tooltip sur tray icon)
- fin d'un process -> afficher exitcode dans frmDetail
- log marche pas toujours (0% d'UC ??)
- fin d'un process/service dans frmDetail -> afficher 'terminé le xxx' en titre quand le process/service n'existe plus
- tooltip partout (manque frmPreferences ? et manque frmLogOptions + forms qui viennent des autres projets)
- images PNG uniquement + virer img inutiles
- Check if file is locked... -> avertir quand recherche terminée (REFAIRE CETTE FEATURE)
- certaines icones moches (yes/no dans lvPrivileges, refresh, find window, )
- get online infos pour les services (changer de provider !!)
- 'select in Window tab' dans task toujours non satisfaisant (au minimum, on peut déjà demander le refresh de lvWindows...)
- graph monitoring -> refresh l'affichage de la valeur survolée également quand la souris se déplace
- vérifier pourquoi cpu usage de Idle dépasse les 100% ; le cas échéant limiter la valeur à 100%
- find hidden processes utilisable pour les PCs distants ? + ajouter Terminate dans le menu popup + éventuellement 'go to process' pour aller dans lvProcess
- déconnexion WMI après longue inactivité -> calculer temps dernière requete et lancer une requete pour éviter la déconnexion si t>MAX ?
- double récupération des strings en mémoire/image dans frmDetail ???
- blocage de l'application quand certains processus bouffe du CPU (cf compilo wingreta) -> est-ce un appel bloquant (genre sendmessage) lors du refresh des process/tasks...?
- dependencies -> PE.filename doit changer SystemRoot en X:\Wind....
- refactoring (objet, virer int et mettre intptr, declarations pinvoke, gestion privileges meilleure...etc....)
- ajouter msgbox "action dangereuse, you sure ?"
- refresh double des services en WMI ??
- view memory (module) -> que si lvProcMem.count = 0...
- affinity process/thread (socket)
- refresh services trop rapide -> impossible de récupérer des infos par socket après (checker semaphore)
- TODO, TOCHANGE, TODO_, TOCHECK, ISNEEDED, TOREMOVE
- virer toolstripmenu dans dependency viewer
- sélectionner premier item tv dep viewer automatiquement
- virer PtrToStructure et n'utiliser que MemoryAlloc
- replace taskmgr sous 7 ?
- pending task : caption -> object.tostring (surchargé chaque cXXXX)
- tcp/udp missing -> msg plutôt que crash
- setLIMITEDinfo dans les access comme pour QueryLIMITEDinfo (thread & process)

- ajouter semaphores de protection dans les methodes "Friend Shared Sub enumXXXX" (pour accès concurrent avec le log) ????
- probablement des bugs de 'collection modifiée' vis à vis du log
- transformer .Created par try/catch ? + manque des Invoke pour les connected dans les cXXXConnection
- getmappedimage... pour socket
- Exception non gérée à 0x71fb5108 dans YAPM.exe : 0xC0000005: Violation d'accès lors de la lecture de l'emplacement 0x00000004. (lors de création/destruction de process -> tester avec les 20000)
- messages Vista like partout
- msgbox encombrant quand pleins d'erreurs connexion !!
- erreurs fonctions via socket qui échouent sur le client, pas le server
- rapport monitoring
- one graph per CPU -> conserver historique
- performances (_currentServices et _currentProcesses remplis 2 fois au démarrage -> customLV qui créé des cObject, et asyncEnum aussi)
- smss.exe reste dans les modules (en rouge) si on change les processus sélectionnés ???
- recherche avant récupération des process -> foreach de CurrentProcesses foireux (bug disparu mais recherche non effectuée)
- upload virus total


2) Plus tard
- enum module via read memory et LdrDataTableEntry (permet d'avoir plus d'infos)
- SBA a réimplémenter
- SBA -> sendmessage configurable
- JOBs
- cycles pour vista, I/O priority, WS shared
- "monitor" sur les processus (sélection du PID, sélection de la catégorie Process/Processus et sélection des bonnes instances)
- infos système dans le general report
- changement privileges processus système
- "other actions" pour les processus (limitation CPU usage...)
- tooltip sur graphes

4) Fonctions à ajouter pleinement
- autres token
- monitoring de plusieurs instances en même temps (multiselection)
- vue treeview
- isPacked, isDotnet...
- fonctionnement avec privilèges réduits


Temp Change log :
/!\ METTRE A JOUR LE FICHIER D'AIDE LORS DE LA RELEASE
- code refactoring
- affinity for threads OK
- YAPM does not hung anymore when some processes are running
- support de Windows x64 basique (NOT COMPLETED YET)
- highlighting des process systèmes OK sur toutes les cultures
- fixed 'key already added' (cEnvVariable) when searching an item
- 'center on screen' pour les windows